{% extends "base.html" %}
{% block title %}
    Projects
{% endblock title %}
{% block scripts %}

{% endblock %}
{% block content %}
<div class="d-flex justify-content-center">
    <div class="d-flex align-items-center flex-column w-25">
    {% if projects %}
        <div class="d-flex flex-column w-75 p-3 justify-content-center">
            <h4 class="form-label">Choose project</h4>
            {% for project in projects %}
                <div class="form-check" id="radio-{{project}}">
                    <input class="form-check-input" type="radio" name="radio_button_project"  value="{{ project }}" id="{{ project }}">
                    <label class="form-check-label" for="{{ project }}">
                        {{project}}
                    </label>
                </div>
            {% endfor %}
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <button type="button" class="btn btn-success flex-fill" onclick="ajax_request('/api/project/' + $('input:radio[name=radio_button_project]:checked').val(), 'get', {}, function(d) {document.location.href='/network/'})">Choose</button>
                    <button type="button" class="btn btn-success flex-fill" onclick="var answer = window.confirm(`Are you sure to delete project ${$('input:radio[name=radio_button_project]:checked').val()}`); if (answer) {ajax_and_toast('/api/project/', 'delete', {project_name: $('input:radio[name=radio_button_project]:checked').val()}, 'Project deleted', 'info'); location.reload()}">Delete</button>
            </div>
        </div>
    {% endif %}
        <div class="d-flex flex-column w-75 p-3 justify-content-center">
            <h4>Create Project</h4>
            <input id="new_project_name" name="project_name" type="text" class="form-control" placeholder="Project name">
            <select class="form-select" id="iface_select">
                {% for i in ifaces %}
                <option value="{{i}}" {% if loop.index0 == 0 %}selected{% endif %}>{{i}}</option>
                {% endfor %}
            </select>
            <div class="d-flex flex-column pt-1">
                <button class="btn btn-success" onclick="ajax_request('/api/project/', 'post', {project_name: document.getElementById('new_project_name').value, 
                iface: document.getElementById('iface_select').value}, function(d) {document.location.href='/network/'}, 
                function(xhr, type, exception) {create_toast('ERROR', 'Project already exists', 'warning')})">Create</button>
            </div>
        </div>
    </div>
</div>
{% endblock content %}