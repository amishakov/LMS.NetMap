from typing import List, Optional
from sqlmodel import Field, Relationship
from setezor.models.ip import IP
from .import IDDependent, TimeDependent, ProjectDependent

class L7SoftwareVulnerabilityComment(IDDependent, TimeDependent, ProjectDependent, table=True):
    __tablename__ = "l7_software_vulnerability_comment"
    __table_args__ = {
        "comment": "Таблица предназначена для комментариев на уязвимости L7"
    }

    l7_software_vulnerability_id: str = Field(foreign_key="l7_software_vulnerability.id", sa_column_kwargs={"comment":"Идентификатор уязвимости на софте на l7"})
    parent_comment_id: Optional[str] = Field(foreign_key="l7_software_vulnerability_comment.id", 
                                             sa_column_kwargs={"comment":"Идентификатор родительского коммента"})

    text: str = Field(sa_column_kwargs={"comment":"Комментарий"})

    user_id: str = Field(foreign_key="user.id", sa_column_kwargs={"comment":"Идентификатор пользователя, оставившего коммент"})
